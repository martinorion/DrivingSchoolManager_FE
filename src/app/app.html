<nav class="top-nav">
    <div class="brand">
      <a routerLink="/dashboard" routerLinkActive="active">{{ title() }}</a>
    </div>

    <button class="nav-toggle" type="button" (click)="toggleMenu()" aria-label="Menu" [attr.aria-expanded]="menuOpen()" aria-controls="primary-nav">
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
    </button>

    <div class="nav-links" [class.open]="menuOpen()" id="primary-nav">
      @if (auth.isAuthenticated()) {
        @if (auth.hasRole('INSTRUCTOR') && hasOrg() === true) {
          <a routerLink="/waiting-room" routerLinkActive="active">Čakáreň</a>
          <a routerLink="/members" routerLinkActive="active">Členovia</a>
          <a routerLink="/vehicles" routerLinkActive="active">Vozidlá</a>
          <a routerLink="/car-reservations" routerLinkActive="active">Rezervácie</a>
          <a routerLink="/incoming-lesson-requests" routerLinkActive="active">Jazdy</a>
          <a routerLink="/groups" routerLinkActive="active">Skupiny</a>
        } @else if (auth.hasRole('INSTRUCTOR') && hasOrg() !== true) {
          <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
          <a routerLink="/instructors" routerLinkActive="active">Pripojenie k organizácii</a>
        } @else if (auth.hasRole('STUDENT'))  {
          <a routerLink="/lesson-requests" routerLinkActive="active">Jazdy</a>
        }
        @else if (auth.hasRole('ADMINISTRATOR')) {
          <a routerLink="/admin" routerLinkActive="active">Admin portal</a>
        }
        <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
        <a routerLink="/my-profile" routerLinkActive="active">Môj profil</a>
        <button type="button" (click)="logout()">Odhlásiť</button>
      } @else {
        <a routerLink="/login" routerLinkActive="active">Prihlásenie</a>
        <a routerLink="/register" routerLinkActive="active">Registrácia</a>
      }
    </div>
  </nav>

  <header class="page-header">
    <div class="page-header-content container">
      <h1 class="page-title">{{ pageTitle() }}</h1>
    </div>
    <div class="header-divider">
      <svg viewBox="0 0 1440 100" preserveAspectRatio="none" focusable="false">
        <path d="M0,40 C240,80 480,0 720,30 C960,60 1200,20 1440,40 L1440,100 L0,100 Z" fill="#fff"></path>
<!--        M0,40 = move to x=0,y=40.-->
<!--        C... = cubic Bézier curve segments (control points and end point) that create the smooth wave.-->
<!--        L1440,100 and L0,100 = straight lines to the bottom corners.-->
<!--        Z = close the path.-->
<!--        fill="#fff" fills the closed shape with white.-->
      </svg>
    </div>
  </header>

  <main class="page">
    <div class="container">
      <router-outlet></router-outlet>
    </div>
  </main>

  @if (auth.hasRole('INSTRUCTOR') && orgPending()) {
    <div class="pending-floating" title="Vaša organizácia zatiaľ nie je schválená a nie je verejná.">
      Organizácia nie je schválená a nie je verejná
    </div>
  }

  <footer class="site-footer">
    <div class="footer-inner container">
      <div class="footer-brand">{{ title() }}</div>
      <div class="footer-copy">© 2025 Všetky práva vyhradené</div>
    </div>
  </footer>
